@page "/areas/form"
@page "/areas/form/{Id:int}"
@inject NavigationManager navigation
<h3>AreaForm</h3>

<EditForm Model="@area">
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-10">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <div class="form-group">
                    <label asp-for="Descripcion" class="control-label"></label>
                    <InputText class="form-control" @bind-Value="@area.Descripcion"></InputText>
                </div>



                <div class="form-group">
                    <button @onclick="Guardar">Guardar</button>
                </div>

            </div>
        </div>

    </div>
</EditForm>

@code {
    [Parameter]
    public int Id { get; set; }

    Areas area = new Areas();
    [Inject]
    public IAreas areasRepo { get; set; }

    public Respuesta<Areas> oRespuesta = new Respuesta<Areas>();

    private async Task Guardar()
    {
        var response = await areasRepo.Store("areas", area);
        oRespuesta = response;
        navigation.NavigateTo("/areas");
    }

    protected override async Task OnInitializedAsync()
    {
        if(Id != 0)
        {
            oRespuesta = await areasRepo.Get("areas/", Id);
            area = oRespuesta.Data;
        }
    }
}
